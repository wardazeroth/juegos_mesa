{%extends 'base.html'%}
{%load static%}
{%block content%}
<div class="marco">
    <div class="row">
        <div class="col-md-1"></div>
        <div class="card" style="width: 30rem; margin-top: 30rem; margin-top:5rem">
            <div class="card-body">
                <h3 class="card-title">{{ partida.juego.nombre}}</h3>
                <p class="card-text">{{ partida.juego.descripcion}}</p>
                <p class="card-text">{{ partida.fecha}}</p>
                <p class="card-text">{{ partida.hora }}</p>
                <p class="card-text">{{ partida.local}}</p>
    
                <table class="table table-dark table-bordered border-primary mt-5">
                    <thead>
                        <tr>
                            <th scope="col">Jugadores Inscritos</th>
                        </tr>
                    </thead>
    
                    {%for jugador in partida_jugador %}
                    <tbody>
                        <tr class="table-active">
                            <td>{{ jugador.jugador.usuario.alias }}<img style="width:4rem; height:4rem; margin-left: 8em;" src="{{ jugador.jugador.usuario.avatar.url }}" alt=""></td>
                            
                        </tr>
                        {%endfor%}
                    </tbody>
                </table>
                <form action="#" method="post">
                    {%csrf_token%}
                    <input type="submit" value="Inscribirse en la partida" class="btn btn-outline-success mt-3">
                </form>
            </div>

    </div>
    <div class=col-md-5>

        <h1 class="text-light mt-5">{{partida.local.nombre}}</h1>

        <div id="map" style="width: 500px; height: 400px;"></div>
    </div>
</div>
</div>

{%endblock%}

{%block js%}
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
<script>
    let map= L.map('map').setView([{{partida.local.latitud}}, {{partida.local.longitud}}], 12 )
    
    L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);


        L.marker([{{partida.local.latitud}}, {{partida.local.longitud}}]).addTo(map).bindPopup('{{partida.local.nombre}}').openPopup()

</script>
{%endblock%}